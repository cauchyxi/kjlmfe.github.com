---
layout: post
title: 第一桶金的历程
category: 生活随笔
---

# 上部 @哈尔滨 准备

## 2012.8.12 代码换钱的机会来了

中午从活动中心走回正心楼时，在一个路口的拐角处，看到一个小广告：

![]({{ site.imgs_url }}first-money1.jpg)

看后，觉得可能是某些中介机构骗人的(先让你交押金之类的费用，然后等到了北京，再联系他，就会听到“对不起，你所拨打的电话已关机”)。但没走几步，我又返回来，心想：“管他呢！先打个电话试试，最坏就是浪费2毛钱”。电话通了，出乎意料的是：对方是工大科技园的老师，瞬间我感觉这事靠谱多了。于是，我们约定1小时后在科技园他的办公室详谈。

谈后，大致了解这个项目是开发一个软件，可以用来增删改查数据库里的信息，其数据库的内容需要我手动把一本机密书籍逐字敲入数据库。由于是涉密资料，所以我必须到北京的XXX公司开发、录入数据，他说明天让北京那边的人再跟我电话说一下具体的情况。

一路走回来，我都兴奋不已，回来后，先在电脑上安装了一个Visual Studio 2010，我估计需要用VC+MFC+SQL Server开发。


## 2012.8.13 瞎忙活一天

今早倒是醒的好早，6点半就自然醒了。上午在网上查了一下，如果编写Windows应用程序，用C#要更简单、更快捷一些。于是去图书馆借了一本《C#从入门到精通》。吃完午饭，直奔机房，喝了咖啡，在github上建了Lear_C-Sharp仓库，打开书，从第一页，一个一个example的敲，学的很开心。发现Visual Studio还是很容易上手的。持续学习了4个小时，一直到下午4点半多，终于北京公司那边来了电话，聊完之后，发现今天的努力都白费了。不要求必须是Windows应用程序。只要该系统能供50-60人使用，用来查询、修改、删除、添加相关资料，用户分为管理员和普通用户即可。数据库需要我自己设计，并且手动录入数据内容。我建议对方做成Web的形式，他说去问问“上头”，要明天才能再给我答复。

想想从昨天到今天的心情，实在是太冲动了，幸亏昨晚没连夜学习Windows应用程序编程。要不然今天接完电话得悔死。

其实倒也不是那么后悔，虽然是白忙活，但是收获还是有的:

  1. 通过敲example，学习一门语言蛮不错的
  2. 有了钱的激励，学习热情无比高涨
  3. 凡事不要冲动


## 2012.8.14 好累

昨晚睡得很晚，将近2点多才睡，但早晨7点多就醒来了，貌似一晚上做梦都在想这个项目。

我打算用[FatFree](http://bcosca.github.com/fatfree/)+[Boostrap](http://twitter.github.com/bootstrap/)框架开发（也是为slimevent项目做准备吧），上午大致学习了解了FatFree。

下午照着[老段](http://zhiyan.at/)已经写好的slimevent原型Demo的架构模式，建立了该系统的原型Demo。

实在太累了，便去跑步，放松了一下。

等了一天北京那边的电话，也没等到。擦！

好了，北京项目赚钱的事，先就此放一放，不要太心急、冲动。

等到对方回复了，再开始突击一下，做一个小模型，之后再去北京。


## 2012.8.15 订票去北京

早晨收到了北京那边关于系统功能要求的邮件，如下：

本数据库针对若干设备进行构建，每个设备中包含部分文字介绍和若干属性，数据库的相关需求简要介绍如下：
	
  1. 对本数据库的操作分两种：（1）一般用户（只有查询的权限）；（2）高级用户（除具有一般用户的权限外，还具有修改、添加、删除和维护数据库的权限）。两类用户通过用户名和密码的方式进行区分。
  2. 数据库数据具有可以整体备份的功能，可以导入和导出以供同类型数据库使用。
  3. 本数据库具有关键字查询（包括在结果中查询）和高级查询。
  4. 关键字查询：列出数据库中包含该关键字的所有设备。
  5. 高级查询：多种条件（在采用下拉属性类别条码并配合相应关键参数数据输入下）通过“与”“或”等逻辑方式联合查询。
  6. 数据库具有统计功能，统计符合查询要求设备的数量，以及这些设备占指定范围内设备的百分比。
  7. 数据库的框架可以通过修改参数名称设计成其他数据的数据库。
  8. 数据库可以通过电脑外出携带。

看后，感觉稍微有点复杂，然后又跟北京那边电话交流了一下，对方确定了可以用Web的形式且他们的服务器支持Linux+Apache+PHP+MySQL，商定20日晚去北京。为了保险起见，我联系了HX，他同意跟我一起去干这个项目。我之后去科技园老师那边拿了去北京的路费。

睡了一个午觉，醒来后，感觉终于把这两天的疲惫修复了。我在想，其实phpMyAdmin就完全能满足他们的需求，要不然直接让他们用phpMyAdmin算了......

下午定了20日晚9点半的Z2次火车票，然后研究了许久phpMyAdmin和其他类似软件，最后觉得这些软件有一定的入门门槛，还是自己开发一个吧。


## 2012.8.16 S项目启动 高效率的一天

上午起得比较晚，和HX吃过午饭，我们便一起开始编程。我们暂定此项目代号为“S”，放在[bitbucket](https://bitbucket.org/)上（bitbucket可以免费的设立私有仓库），大约从中午12点一直到21点多，除了吃饭以及短暂的休息，我和他高效率的编写代码，一边商讨，一边写代码，这种感觉非常好。他负责前端，我负责后端，这种分工合作的感觉棒极了，我和他共计提交代码20次，完成了关于用户管理方面的功能（登录、登出、添加、删除、修改）。

明天继续再战！

经过一天的Coding，发现幸亏找了HX一起合作，否则看似一个简单的项目，但实际上真正实践时，就会发现一个人真的很难搞定。


## 2012.8.17 继续Coding 

编码一天，主要完成了“删除数据库功能、修改个人密码、IE6兼容性、查找用户、显示用户列表”功能，不得不说IE6恶心死人了。

通过这两天的编程，发现表面上看去不太复杂的项目，但是真正去实施的时候，又有许多细节的地方又要考虑，也不是一件容易的事。


## 2012.8.18 休息

因为HX有事，今天主要以休息为主，上午接到X老师的电话，让我去取在北京的生活费(住宿+吃饭)。去了后，他又跟我唠了一会，交代了一下注意事项等。

下午洗了衣服，然后去游泳放松了一下。

晚上接着弄S项目，主要完成了一些数据库管理操作：删除、导入、导出。


## 2012.8.19 累奔

依旧一天的编码生活，完善了有关数据库的操作(从本地恢复，删除所有数据库，备份当前数据库到服务器，导出服务器上的某个版本数据库，删除某个版本数据库，恢复某个版本数据库)。

HX做了一个添加数据的页面(包含各种形式的输入)以及写了windows平台一键安装xampp和导入数据库、S源程序的脚本，方便客户出差时单机使用。

我研究了单机无网条件下(客户公司没有连入互联网)搭建LAMP环境的过程，本来想找deb安装包。最后发现，xampp有linux版本，安装非常方便，于是我们决定采用xampp，希望它比较稳定。

本以为直接把项目源程序copy到windows就直接可以运行，但是发现有不兼容的地方，在linux环境下，目录形式：“db_bak/db-2012-8-19(19:20:3).sql"，但是在windows下就会出错，windows的目录用"\"分割且不能有":"，于是我又修改代码，保证跨平台的运行。


## 2012.8.20 前往北京

今天完成了简单的数据添加功能和数据详细页面以及编辑功能，晚上我们乘坐Z2前往北京。


# 中部 @北京 难忘的10天

## 2012.8.21 抵达北京

虽然是软座，但是还是很不舒服，晚上也没怎么睡好。早晨7点半下了火车。吃过早饭后，我们坐车前往客户公司，大约2个多小时后，我们终于到了，这里好偏僻！他们的一位员工先带我们到宾馆安顿了下来。

下午去了客户公司，给他们展示了一下已经做好的Demo，之后互相交换了一下意见，最后我们大致翻阅了一下那本需要录入的机密书籍。

Oh my God！我真的差点要晕倒！那字密密麻麻的，300多页。最要命的是：结构混乱，数据格式繁多复杂！

由于他们要根据一些参数的数值大小范围搜索数据库内容，所以不能简单的把所有内容当做文本录入数据库，必须建立一个合适的存储方案才能实现”文本、数值、类别、与或非”多条件的高级搜索功能。

晚上我们又仔细研究了一下那本书，越研究越发现，这简直是不可能完成的任务。但最后我们还是想出了解决方案：化繁为简，把数据规范化，把含有数学表达式的自然语句抽象成数学模型，再存入数据库，这样就能根据数值范围搜索了。

晚饭回来后，我和HX又商讨了一下数据库模型，越讨论越逐渐感觉事情比较明朗了。

总得来说，这次绝对是一个挑战，必须要搏一把！不能放弃！


## 2012.8.22 宾馆内的一天

除了吃饭，我和HX在宾馆编了一天的程序，主要完成了设备信息增加的功能。


## 2012.8.23 难吃的火锅

依旧在宾馆编程一天，昨晚睡得比较晚，早晨起来时，也都九点多了，出去吃了一顿早饭，之后就一直编程到晚上。

今天主要解决了：类别增加（包含子属性的增加）以及根据拼音缩写快速提示的功能。

晚上我们出去，找了一家火锅店，令人失望的是这家又难吃、量又少、又贵。本想改善一下伙食、腐败一下，但事与愿违，以后还是乖乖的吃米饭和炒菜吧。

这几天吃饭时，发现餐馆里的服务人员基本上都是外地人，平时出门时也发现这里附近北京本地人也很少，都是外地口音。

在北京，这么偏僻的一个地方，但丝毫不缺乏高档的酒店、宾馆以及各种银行等。KFC也遍地都是，这也许就是北京的魅力吧！吸引着全国各地的人来这里拼搏、赚钱。等到过年时，大家又都离开这个繁华的城市，归还家乡。用自己一年多的薪水给家人和朋友们买点东西带回去。等过年后，又匆匆返回北京，年复一年 ....

今天换了新的房间，终于有网了，网速还挺快。不错！


## 2012.8.24 前端工程师 伤不起啊

一天比一天睡得晚，12点多才开始正式编程，一直干到晚上10点多.早晨我们决定今天完成高级搜索和详细页面.

伤不起啊，一个高级搜索页面整了一天，晚上弄好后，还发现IE6下有bug，我擦！

越发觉得自己有点喜欢设计，而且感觉设计品味有点不错，但是不擅长将脑海中的设计转化为前端代码。

S项目是越来越成型了，真的好担心它能否正常运行，总感觉会有许多bug没发现！

是不是一开始，就应该应用软件工程的模式呢？


## 2012.8.25 搜索引擎？

今天完善了简单搜索和高级搜索、详细页面以及编辑信息功能。搜索的功能是各种SQL的like语句，真的好担心效率问题，看网上说，like效率特别差，但是由于他们的数据库信息比较少，希望没什么问题。

哈哈!没想到，自己也做了一个搜索引擎！准确的说只能称得上搜索，绝对称不上引擎。


## 2012.8.26 满目疮痍的bug

今天进一步完善了高级搜索和关键字搜索以及统计功能、搜索结果关键字高亮显示。晚上收到了在淘宝上买的机密书的pdf版本(不得不说淘宝真强大)，然后用汉王OCR软件识别，发现效果非常不错，正确率相当的高，但是需要人工再次校对。现在想想，如果手动录入这本书的内容是绝对不现实的。

试着用已经开发好的数据录入功能录了一些数据，录着录着，就发现了一个bug，过一会，又发现了一个bug......

现在觉得我们自己造了一个5000多行的大怪物，已经不能控制它了，满目疮痍的bug。真的很担心，万一等我们走了，又出现很多严重的bug。


## 2012.8.27 好累啊 脑袋疼

昨晚依旧三点多睡的，大约9点多，被妈妈的电话吵醒，之后就睡不着了，冲了澡，又开始了一天的Coding。

可能是由于起来太早了，今天一天脑袋都木木的，效率很低下，状态也不好。

S项目上完成了:根据参数范围搜索的后台、当搜索时，提示可搜索范围的最大最小值、修了各种bug、校对排版了一些数据

现在想想写点作业、考点试，简直都不算什么。

每天3点睡觉、9点起床叫外卖、冲澡、吃饭、编程到晚上8点、叫外卖、吃饭、编程到凌晨3点、被无尽的bug欺负着、胡子、头发肆意的疯长着，我快成原始人了！

真的真的好想快点结束这个项目，然后回学校，开始正常的生活。

之前觉得很简单的这事，现在已经远远超出了我的预期，不得不说，HX给了我很大的信心也帮我解决了好多难题。


## 2012.8.28 客户满意

早晨起来修了修bug，中午去客户公司，给他们演示了一下，他们很满意。

预计我们这周就能结束了，后面这几天就再修修bug，把数据录入一些。

下午乘车去昌平找SH（之前答应给她刷机，顺便把帮她下载好的300多G的电影给她），我从丰台区纵跨北京城，历经4个多小时，晚上8点多终于见到了她。


## 2012.8.29 和LX瞎转达

大清早，我又从昌平连忙赶到西单（之前跟LX约了今早见面），之后跟他在王府井转了转、一起去军事博物馆溜达了一圈。这家伙变得越来越壮了。

晚上回到宾馆后，也没怎么休息，接着录数据，修bug。为第二天安装到服务器上做准备，又TMD干到三点多。


## 2012.8.30 再见 北京

虽然又是3点多睡得，但是早晨依旧8点多就醒了，强迫自己睡，也睡不着，九点多客户通知我们去公司，安装软件到服务器上，我和HX赶紧洗漱，匆忙的把程序刻录到光盘上（他们公司不允许用U盘），更操蛋的是：用windows自带的刻录，失败了，忙中出乱！顾不了那么多了，先去他们公司再说，大约50分钟后，我们到达了公司，XXX听我们说，数据没刻录到盘上，看她意思是等重新刻完再去网络信息部门。

我心想，不管刻没刻，先去那边，跟技术人员沟通一下再说，每次都让XXX中间传话，意思都不能正确的传递，毕竟都是涉及到计算机专业技术的东西，他们也不懂。所以我给XXX说，“我们先去那边看看，先问问清楚”。

同一楼层，走了不到10米，就到了网络信息部，就这么近的距离，居然之前要通过那么多繁琐的手续沟通！正JB死板！

到了网络信息部门，悲剧的事发生了，他们问我们要装的是什么东西，我说是一个网站，Apache+MySQL+php。“我们不能安装MySQL,只能使用SQL Server 2005和Oracle 10g两种数据库”，不能装MySQL！！！当时那个心啊！拔凉拔凉的......最后沟通来、沟通去，也没有什么好办法，总之他们公司绝对不能安装MySQL！最后我和HX商量了一下，看能不能迁移到他们能用的数据库上。

最后，跟X主任说：“我们回去看看能不能迁移数据库，今晚给你回复”。 临走时，XXX也挺不好意思的。因为来京之前，我在电话上就让他确认能否安装Apache+MySQL+php，他告诉我可以安装。但是他之前询问的人不是真正负责的人，也就是说他联系错人了。沟通失误！

回到宾馆后，下载SQL Server 2005和Oracle 10g，查阅相关资料、发邮件到[PureWeber](http://www.pureweber.com/)讨论组。最后得出的结论是：能迁移，但是一两天绝对搞定不了。我们决定，先回学校，在学校修改好，测试没问题后，写好安装说明和使用说明，给他们发过去。

跟北京这边还有哈尔滨那边的老师说了这个方案，他们都同意了，于是我们立即联系票贩子，收拾行李，先到西直门拿上票，然后又匆忙赶到火车站，最后上了车后，离发车也就10分钟了，现在想想，正是太惊险了！中间还出了一个小插曲，在我们退了房，吃饭时，票贩子打电话说，没有硬卧了，只有两张软卧，这不行啊，太贵了！当时我和HX都急了！天无绝人之路，好人一生平安，过一会儿，票贩子又打来，说又找到了两张硬卧票。

那晚，在火车上是我来京以来睡得最早的一次。


# 下部 @哈尔滨 迁移数据库

## 2012.8.31 回哈第一天

早晨8点多下了火车、冲澡、上课、跑步......

学校生活真舒服!


## 2012.9.2 该死的SQL Server

起来后，就去机房了，然后便开始安装Windows Server 2003、SQL Server 2005、用php的pdo连接SQL Server，期间出现了一系列小问题，这些事情足足耗费了我一天的时间。

弄这种没什么太大技术含量的而且复杂繁琐的东西正真心没什么意思。

当初就不应该答应他们说能迁移数据库，要不然就用MySQL，要不然就再找别人开发去，反正又不是我们的错。我们还是太善良了。


## 2012.9.3 上课第一天

昨晚半夜被一只蚊子纠缠了好久，害的我早晨也没听到闹钟，上课迟到10分钟多。

下午到晚上依旧在弄S项目的数据迁移，MySQL和SQL Server的SQL语法区别很大，需要改很多地方，貌似F3的DB类对SQL Server的SQL语句支持不是很好，有些SQL用SQL Server自带软件能正常query，但是用F3查询结果为空，明天直接用PDO的query调用试试，实在不行，就重写一个DB类。


## 2012.9.4 降服windows

S项目今天进展很大，HX终于解决了在Windows Server 2003运行的bug以及连接数据库的bug，我也完成了上传图片功能，悲剧的是，那台SQL Server 2005罢工了，服务硬是启动不起来。windows正JB操蛋！


## 2012.9.5 测试

下午在机房，依旧弄S项目，把SQL Server卸载重装，终于好使了，找了台IE6机子，大概全面测试了一遍，又发现了一些小bug。

下午去跑步时，膝盖好疼，估计是天气太凉的原因。看这几天的情况，哈尔滨是不太可能再热起来了。跑步估计也快要停止了，转而健身、游泳、腹肌训练。或者找个羽毛球球友，每晚打打羽毛球也不错。


## 2012.9.7 数据库兼容性问题解决

下午去机房弄S项目，基本上没什么问题了，主要修复了一些小bug。HX想到了一个解决数据库不同的好办法，设置一个数据库参数，其实我们使用的MySQL与SQL Server的SQL语句主要差别实在\`\`与\[\]，所以在查询之前做一下字符替换即可。这样就简单的解决了数据库兼容性的问题。

## 2012.9.8 修bug

上午和HX在机房商量了一下，争取明天晚上做出一个S项目能用的版本，写好文档，然后发给北京那边，好让他们在周一可以使用一下。

我和他总结了现存的bug，然后分了一下工，所以上午也就是修了修bug。


## 2012.9.9 S项目接近尾声

和HX今天在机房弄了一天的S项目，我重写了数据库管理（导入、导出、删除、备份）的功能，数据库管理也可以兼容MySQL和SQL Server了，HX修了一些高级检索方面的bug。用Vim对OCR识别出来的数据进行了排版。真的不敢想象，如果没有Vim，那么排版的工作将是一个难以完成的任务。

晚上录了一些数据。


## 2012.9.10 第一次上瑜伽课

录数据....

晚上，去上了第一节瑜伽课，这课上的真爽。早应该就报名参加瑜伽。

## 2012.9.11 交付S项目服务器版

午饭后，便去机房录数据，最后还差60多K的数据没录，实在录得我太恶心了，回去把衣服洗了，打扫了一下寝室。

晚上和HX一起把S项目整理了一下，他写了安装说明，我们用电脑测试了一番，然后打包好，发给了北京那边。

就此，S项目告一段落，我估计，北京那边肯定还会联系我，反映各种Bug之类的。

## 2012.9.14 交付S项目单机版

把出差使用的单机版进行了整理、测试完。打包给北京那边发了过去。

## 2012.9.15 拿到了第一桶金2000元

今天去X老师那结算了薪酬，一共4000元。

刚接过他递过来的信封，他说，你们还需要写一个软件文档，大约几十页......

## 吃饭编码睡觉一体化

![]({{ site.imgs_url }}first-money5.jpg)

## 矿泉水君们

![]({{ site.imgs_url }}first-money2.jpg)
![]({{ site.imgs_url }}first-money3.jpg)
![]({{ site.imgs_url }}first-money4.jpg)

## 米饭和菜菜君们

![]({{ site.imgs_url }}first-money6.jpg)
![]({{ site.imgs_url }}first-money7.jpg)
![]({{ site.imgs_url }}first-money8.jpg)
